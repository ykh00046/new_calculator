# Plan: Dashboard UI Enhancement

> PDCA Phase: **Plan**
> Feature: `ui-enhancement`
> Created: 2026-02-20
> Status: Draft

---

## 1. Background & Motivation

ì´ì „ PDCA ì‚¬ì´í´ì—ì„œ ë°±ì—”ë“œ API(ë³´ì•ˆ, ì„±ëŠ¥, Rate Limiting) ê°œì„ ì„ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤.
ì´ì œ ì‚¬ìš©ì ê²½í—˜ í–¥ìƒì„ ìœ„í•´ **Dashboard UI/UX ê°œì„ **ì´ í•„ìš”í•©ë‹ˆë‹¤.

### í˜„ì¬ ë¬¸ì œì 

**UI/UX:**
- ëŒ€ì‹œë³´ë“œ ë””ìì¸ì´ ê¸°ë³¸ Streamlit ìŠ¤íƒ€ì¼ë¡œ ë‹¨ì¡°ë¡œì›€
- ë‹¤í¬ ëª¨ë“œ ë¯¸ì§€ì› â€” ì•¼ê°„ ì‘ì—… ì‹œ ëˆˆì˜ í”¼ë¡œ
- ëª¨ë°”ì¼ ë°˜ì‘í˜• ë ˆì´ì•„ì›ƒ ë¯¸ìµœì í™”
- ì°¨íŠ¸ ì¸í„°ë™ì…˜ ì œí•œì  (ì¤Œ, íŒ¬, í•„í„° ê¸°ëŠ¥ ë¶€ì¡±)

**ë°ì´í„° ì‹œê°í™”:**
- ì›”ë³„ ì¶”ì´ ì°¨íŠ¸ë§Œ ì¡´ì¬ â€” ì¼ë³„/ì£¼ë³„/ë¶„ê¸°ë³„ ë·° ì—†ìŒ
- ì œí’ˆë³„ ë¹„êµ ì°¨íŠ¸ ë¶€ì¬
- KPI ì¹´ë“œ (ì´ ìƒì‚°ëŸ‰, í‰ê·  ë“±) ë¯¸êµ¬í˜„
- ë°ì´í„° ìƒˆë¡œê³ ì¹¨ ìƒíƒœ í‘œì‹œ ì—†ìŒ

**ì‚¬ìš©ì ê²½í—˜:**
- ì‚¬ì´ë“œë°” í•„í„°ê°€ í™”ë©´ ìƒë‹¨ì— ê³ ì •ë˜ì–´ ìŠ¤í¬ë¡¤ ì‹œ ë¶ˆí¸
- ëŒ€ìš©ëŸ‰ ë°ì´í„° ë¡œë”© ì‹œ ì§„í–‰ ìƒíƒœ ë¯¸í‘œì‹œ
- ì¦ê²¨ì°¾ê¸° í•„í„°/í”„ë¦¬ì…‹ ì €ì¥ ê¸°ëŠ¥ ì—†ìŒ

---

## 2. Goals

| ID | ëª©í‘œ | ì¸¡ì • ê¸°ì¤€ |
|:--:|------|----------|
| G1 | ì‚¬ìš©ì ë§Œì¡±ë„ í–¥ìƒ | UI ê°œì„  í›„ ì‚¬ìš©ì í”¼ë“œë°± ê¸ì •ë¥  80%+ |
| G2 | ë°ì´í„° ì‹œê°í™” ë‹¤ì–‘í™” | ì°¨íŠ¸ íƒ€ì… 3ì¢…ë¥˜+ ì¶”ê°€ (KPI, ë¹„êµ, íŠ¸ë Œë“œ) |
| G3 | ëª¨ë°”ì¼ ì ‘ê·¼ì„± í™•ë³´ | ëª¨ë°”ì¼ ë·°í¬íŠ¸ì—ì„œ ì •ìƒ ë™ì‘ |
| G4 | ì¸í„°ë™í‹°ë¸Œ ê¸°ëŠ¥ ê°•í™” | ì°¨íŠ¸ ì¤Œ/í•„í„°/ë‹¤ìš´ë¡œë“œ ê¸°ëŠ¥ |

---

## 3. Scope

### In Scope

| ID | í•­ëª© | íŒŒì¼ | ë‚œì´ë„ |
|:--:|------|------|:------:|
| U1 | ë‹¤í¬ ëª¨ë“œ ì§€ì› | `dashboard/app.py` | Medium |
| U2 | KPI ëŒ€ì‹œë³´ë“œ ì¹´ë“œ | `dashboard/app.py` | Low |
| U3 | ì œí’ˆë³„ ë¹„êµ ì°¨íŠ¸ | `dashboard/app.py` | Medium |
| U4 | ì¼ë³„/ì£¼ë³„ íŠ¸ë Œë“œ ë·° | `dashboard/app.py` | Medium |
| U5 | ì°¨íŠ¸ ì¸í„°ë™ì…˜ ê°•í™” | `dashboard/app.py` | Low |
| U6 | ë¡œë”© ìƒíƒœ í‘œì‹œ | `dashboard/app.py` | Low |
| U7 | í•„í„° í”„ë¦¬ì…‹ ì €ì¥ | `dashboard/app.py` | Medium |
| U8 | ë°˜ì‘í˜• ë ˆì´ì•„ì›ƒ | `dashboard/app.py` | Medium |

### Out of Scope

- ì‚¬ìš©ì ì¸ì¦/ê¶Œí•œ (ë³„ë„ PDCAë¡œ ë¶„ë¦¬)
- ì‹¤ì‹œê°„ WebSocket ì—…ë°ì´íŠ¸ (ë³„ë„ PDCAë¡œ ë¶„ë¦¬)
- ì»¤ìŠ¤í…€ í…Œë§ˆ ì—ë””í„° (ì°¨ê¸° ë²„ì „)
- PDF ë¦¬í¬íŠ¸ ìƒì„± (ë³„ë„ PDCAë¡œ ë¶„ë¦¬)
- ë‹¤êµ­ì–´ ì§€ì› (i18n)

---

## 4. Detailed Plan

### U1. ë‹¤í¬ ëª¨ë“œ ì§€ì›

**í˜„ì¬ ìƒíƒœ:** ê¸°ë³¸ Streamplit ë¼ì´íŠ¸ í…Œë§ˆë§Œ ì‚¬ìš©

**ë³€ê²½ ë‚´ìš©:**
1. ì‚¬ì´ë“œë°”ì— í…Œë§ˆ í† ê¸€ ìŠ¤ìœ„ì¹˜ ì¶”ê°€
2. `st.session_state`ë¡œ í…Œë§ˆ ìƒíƒœ ê´€ë¦¬
3. Plotly ì°¨íŠ¸ í…œí”Œë¦¿ ë™ì  ë³€ê²½ (`plotly_white` â†” `plotly_dark`)
4. CSS ì»¤ìŠ¤í…€ ìŠ¤íƒ€ì¼ë¡œ ìƒ‰ìƒ íŒ”ë ˆíŠ¸ ì •ì˜

**êµ¬í˜„ ì˜ˆ:**
```python
# Theme toggle
if "dark_mode" not in st.session_state:
    st.session_state.dark_mode = False

dark_mode = st.sidebar.toggle("ğŸŒ™ ë‹¤í¬ ëª¨ë“œ", value=st.session_state.dark_mode)
st.session_state.dark_mode = dark_mode

# Apply theme
plotly_template = "plotly_dark" if dark_mode else "plotly_white"
```

---

### U2. KPI ëŒ€ì‹œë³´ë“œ ì¹´ë“œ

**í˜„ì¬ ìƒíƒœ:** ìƒì„¸ ë°ì´í„° í…Œì´ë¸”ê³¼ ì°¨íŠ¸ë§Œ í‘œì‹œ

**ë³€ê²½ ë‚´ìš©:**
1. ìƒë‹¨ì— ì£¼ìš” ì§€í‘œ ì¹´ë“œ 4ê°œ ë°°ì¹˜:
   - ğŸ“Š ì´ ìƒì‚°ëŸ‰ (ì„ íƒ ê¸°ê°„)
   - ğŸ“¦ ì´ ìƒì‚° ê±´ìˆ˜
   - ğŸ“ˆ ì¼í‰ê·  ìƒì‚°ëŸ‰
   - ğŸ† ìµœë‹¤ ìƒì‚° ì œí’ˆ
2. `st.metric()` ì»´í¬ë„ŒíŠ¸ í™œìš©
3. ì´ì „ ê¸°ê°„ ëŒ€ë¹„ ë³€í™”ìœ¨ í‘œì‹œ (ì„ íƒ)

**êµ¬í˜„ ì˜ˆ:**
```python
col1, col2, col3, col4 = st.columns(4)
with col1:
    st.metric("ì´ ìƒì‚°ëŸ‰", f"{total_qty:,} ea", delta=f"+{delta}%")
with col2:
    st.metric("ìƒì‚° ê±´ìˆ˜", f"{batch_count:,} ê±´")
# ...
```

---

### U3. ì œí’ˆë³„ ë¹„êµ ì°¨íŠ¸

**í˜„ì¬ ìƒíƒœ:** ì›”ë³„ ì „ì²´ ì¶”ì´ë§Œ í‘œì‹œ

**ë³€ê²½ ë‚´ìš©:**
1. ìƒˆ íƒ­ "ğŸ“Š ì œí’ˆ ë¹„êµ" ì¶”ê°€
2. ì„ íƒëœ ì œí’ˆë“¤ì˜ ìƒì‚°ëŸ‰ ë¹„êµ ë°” ì°¨íŠ¸
3. Top 10 ì œí’ˆ íŒŒì´ ì°¨íŠ¸
4. ì œí’ˆë³„ íŠ¸ë Œë“œ ë¼ì¸ ì°¨íŠ¸ (ì¤‘ë³µ ì„ íƒ ì‹œ)

**êµ¬í˜„ ì˜ˆ:**
```python
# Top 10 Pie Chart
fig_pie = go.Figure(go.Pie(
    labels=top10_df['item_code'],
    values=top10_df['total_qty'],
    hole=0.4
))
```

---

### U4. ì¼ë³„/ì£¼ë³„ íŠ¸ë Œë“œ ë·°

**í˜„ì¬ ìƒíƒœ:** ì›”ë³„ ì§‘ê³„ë§Œ ì§€ì›

**ë³€ê²½ ë‚´ìš©:**
1. ì§‘ê³„ ë‹¨ìœ„ ì„ íƒ ë¼ë””ì˜¤ ë²„íŠ¼: ì¼ë³„ / ì£¼ë³„ / ì›”ë³„
2. ê° ë‹¨ìœ„ë³„ ë°ì´í„° ì§‘ê³„ í•¨ìˆ˜ ì¶”ê°€
3. ì°¨íŠ¸ xì¶• ë™ì  í¬ë§·íŒ…
4. ê¸°ê°„ ì„ íƒ UI ê°œì„  (ë‚ ì§œ ë²”ìœ„ ìŠ¬ë¼ì´ë”)

**êµ¬í˜„ ì˜ˆ:**
```python
agg_unit = st.radio("ì§‘ê³„ ë‹¨ìœ„", ["ì¼ë³„", "ì£¼ë³„", "ì›”ë³„"], horizontal=True)

if agg_unit == "ì¼ë³„":
    df['period'] = df['production_date']
elif agg_unit == "ì£¼ë³„":
    df['period'] = df['production_dt'].dt.to_period('W').astype(str)
else:
    df['period'] = df['year_month']
```

---

### U5. ì°¨íŠ¸ ì¸í„°ë™ì…˜ ê°•í™”

**í˜„ì¬ ìƒíƒœ:** ê¸°ë³¸ Plotly ì°¨íŠ¸ (ì¤Œ/íŒ¬ ê¸°ë³¸ê°’)

**ë³€ê²½ ë‚´ìš©:**
1. ì°¨íŠ¸ ë‚´ ë²”ìœ„ ì„ íƒ ê¸°ëŠ¥ (`rangeselector`)
2. ë°ì´í„° í¬ì¸íŠ¸ í˜¸ë²„ ì •ë³´ í™•ì¥
3. ì°¨íŠ¸ ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ ë²„íŠ¼ (`mode_bar_buttons`)
4. ë²”ë¡€ í´ë¦­ìœ¼ë¡œ ì‹œë¦¬ì¦ˆ í† ê¸€

**êµ¬í˜„ ì˜ˆ:**
```python
fig.update_layout(
    xaxis=dict(
        rangeselector=dict(
            buttons=[
                dict(count=7, label="1ì£¼", step="day", stepmode="backward"),
                dict(count=1, label="1ì›”", step="month", stepmode="backward"),
                dict(step="all", label="ì „ì²´")
            ]
        )
    )
)
```

---

### U6. ë¡œë”© ìƒíƒœ í‘œì‹œ

**í˜„ì¬ ìƒíƒœ:** `st.spinner()`ë§Œ ì‚¬ìš©

**ë³€ê²½ ë‚´ìš©:**
1. ë°ì´í„° ë¡œë”© ì‹œ í”„ë¡œê·¸ë ˆìŠ¤ ë°” í‘œì‹œ
2. ìºì‹œ ìƒíƒœ í‘œì‹œ (Cache Hit / DB Query)
3. ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸ ì‹œê°„ í‘œì‹œ
4. ë°±ê·¸ë¼ìš´ë“œ ìƒˆë¡œê³ ì¹¨ ì˜µì…˜

**êµ¬í˜„ ì˜ˆ:**
```python
with st.spinner("ë°ì´í„° ë¡œë”© ì¤‘..."):
    progress_bar = st.progress(0)
    for i, step in enumerate(data_steps):
        progress_bar.progress((i + 1) / len(data_steps))
        # process step
    progress_bar.empty()

st.caption(f"ğŸ“… ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: {datetime.now():%Y-%m-%d %H:%M:%S}")
```

---

### U7. í•„í„° í”„ë¦¬ì…‹ ì €ì¥

**í˜„ì¬ ìƒíƒœ:** ë§¤ë²ˆ í•„í„° ì¬ì„¤ì • í•„ìš”

**ë³€ê²½ ë‚´ìš©:**
1. í˜„ì¬ í•„í„° ì„¤ì •ì„ í”„ë¦¬ì…‹ìœ¼ë¡œ ì €ì¥
2. ì €ì¥ëœ í”„ë¦¬ì…‹ ë“œë¡­ë‹¤ìš´ì—ì„œ ì„ íƒ
3. `st.session_state`ì— í”„ë¦¬ì…‹ ëª©ë¡ ì €ì¥
4. í”„ë¦¬ì…‹ ì´ë¦„ í¸ì§‘/ì‚­ì œ ê¸°ëŠ¥

**êµ¬í˜„ ì˜ˆ:**
```python
if "filter_presets" not in st.session_state:
    st.session_state.filter_presets = {}

preset_name = st.text_input("í”„ë¦¬ì…‹ ì´ë¦„")
if st.button("ğŸ’¾ í˜„ì¬ í•„í„° ì €ì¥"):
    st.session_state.filter_presets[preset_name] = {
        "item_codes": item_codes,
        "date_from": date_from,
        "date_to": date_to,
        "keyword": keyword
    }
```

---

### U8. ë°˜ì‘í˜• ë ˆì´ì•„ì›ƒ

**í˜„ì¬ ìƒíƒœ:** ê³ ì • ë„ˆë¹„ ì»¬ëŸ¼

**ë³€ê²½ ë‚´ìš©:**
1. í™”ë©´ í¬ê¸°ì— ë”°ë¥¸ ì»¬ëŸ¼ ìˆ˜ ìë™ ì¡°ì ˆ
2. ëª¨ë°”ì¼ì—ì„œ ì‚¬ì´ë“œë°” â†’ ë“œë¡œì–´ ë°©ì‹
3. í…Œì´ë¸” ê°€ë¡œ ìŠ¤í¬ë¡¤ í—ˆìš©
4. í„°ì¹˜ ì¹œí™”ì ì¸ ë²„íŠ¼ í¬ê¸°

**êµ¬í˜„ ì˜ˆ:**
```python
# Responsive columns
import streamlit.components.v1 as components

def get_screen_width():
    return components.html(
        "<script>window.parent.window.innerWidth</script>",
        height=0
    )

# Adjust columns based on width
if screen_width < 768:
    # Mobile: single column
    cols = [st.container()]
else:
    # Desktop: 4 columns
    cols = st.columns(4)
```

---

## 5. Modified Files Summary

| íŒŒì¼ | ë³€ê²½ ìœ í˜• | í•­ëª© |
|------|----------|------|
| `dashboard/app.py` | Modified | U1~U8: ëª¨ë“  UI ê°œì„  ì‚¬í•­ |

---

## 6. Risk & Mitigation

| ë¦¬ìŠ¤í¬ | ì˜í–¥ | ì™„í™” ë°©ì•ˆ |
|--------|------|----------|
| Plotly ëŒ€ìš©ëŸ‰ ë°ì´í„° ë Œë”ë§ ì§€ì—° | 1ë§Œ ê±´ ì´ìƒ ì‹œ ì°¨íŠ¸ ëŠë ¤ì§ | ë°ì´í„° ìƒ˜í”Œë§ ë˜ëŠ” ì§‘ê³„ ë‹¨ìœ„ ì¡°ì • |
| ì„¸ì…˜ ìƒíƒœ ë©”ëª¨ë¦¬ ì¦ê°€ | í”„ë¦¬ì…‹ ë‹¤ìˆ˜ ì €ì¥ ì‹œ | ìµœëŒ€ í”„ë¦¬ì…‹ ê°œìˆ˜ ì œí•œ (10ê°œ) |
| ë‹¤í¬ ëª¨ë“œ CSS ì¶©ëŒ | ì¼ë¶€ ì»´í¬ë„ŒíŠ¸ ê°€ë…ì„± ì €í•˜ | ì»¤ìŠ¤í…€ CSSë¡œ ì„¸ë¶€ ì¡°ì • |
| ëª¨ë°”ì¼ ë¸Œë¼ìš°ì € í˜¸í™˜ì„± | êµ¬í˜• ë¸Œë¼ìš°ì € ì§€ì› ì œí•œ | ìµœì‹  2ê°œ ë²„ì „ë§Œ ê³µì‹ ì§€ì› ëª…ì‹œ |

---

## 7. Verification Plan

1. **U1 ë‹¤í¬ ëª¨ë“œ:**
   - í† ê¸€ í´ë¦­ ì‹œ ì¦‰ì‹œ í…Œë§ˆ ì „í™˜
   - ëª¨ë“  ì°¨íŠ¸/í…ìŠ¤íŠ¸ ê°€ë…ì„± í™•ì¸
   - ì„¸ì…˜ ìœ ì§€ í›„ì—ë„ ì„¤ì • ìœ ì§€

2. **U2 KPI ì¹´ë“œ:**
   - ìˆ˜ì¹˜ ì •í™•ì„± ê²€ì¦ (API ì‘ë‹µê³¼ ì¼ì¹˜)
   - ì´ì „ ê¸°ê°„ ëŒ€ë¹„ delta ê³„ì‚° ì •í™•

3. **U3~U4 ì°¨íŠ¸:**
   - ì œí’ˆ ì„ íƒ ì‹œ í•„í„°ë§ ë™ì‘
   - ì§‘ê³„ ë‹¨ìœ„ ë³€ê²½ ì‹œ ì°¨íŠ¸ ì—…ë°ì´íŠ¸
   - ë°ì´í„° ì—†ì„ ë•Œ ì ì ˆí•œ ë©”ì‹œì§€

4. **U5~U6 ì¸í„°ë™ì…˜:**
   - ë²”ìœ„ ì„ íƒ ë™ì‘ í™•ì¸
   - ë‹¤ìš´ë¡œë“œ ë²„íŠ¼ ì •ìƒ ë™ì‘
   - ë¡œë”© ìƒíƒœ UI ê¹¨ì§ ì—†ìŒ

5. **U7~U8 UX:**
   - í”„ë¦¬ì…‹ ì €ì¥/ë¶ˆëŸ¬ì˜¤ê¸° ë™ì‘
   - ëª¨ë°”ì¼ ë·°í¬íŠ¸ (320px~768px) ì •ìƒ í‘œì‹œ

---

## 8. Dependencies

- `streamlit >= 1.28` (toggle ì»´í¬ë„ŒíŠ¸)
- `plotly >= 5.18` (ìµœì‹  í…œí”Œë¦¿)
- ê¸°ì¡´ API ì„œë²„ ì •ìƒ ë™ì‘ í•„ìš”

---

## 9. Timeline

| ë‹¨ê³„ | í•­ëª© | ì˜ˆìƒ |
|------|------|------|
| Design | ìƒì„¸ ì„¤ê³„ ë¬¸ì„œ ì‘ì„± | - |
| Do | U1~U6 êµ¬í˜„ | - |
| Do | U7~U8 êµ¬í˜„ | - |
| Check | UI í…ŒìŠ¤íŠ¸ & Gap ë¶„ì„ | - |
| Act | ì´ìŠˆ ìˆ˜ì • | - |
